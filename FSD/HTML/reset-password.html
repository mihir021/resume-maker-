<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Reset Password</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="d-flex justify-content-center align-items-center vh-100">

<form id="resetForm" class="p-4 shadow rounded" style="width:360px;">
    <h4 class="mb-3 text-center">Reset Password</h4>

    <label class="fw-bold">New Password</label>
    <input type="password" name="password" class="form-control mb-3" required>

    <button class="btn btn-success w-100">Reset Password</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("resetForm");

    // extract token from URL
    const token = window.location.pathname.split("/").pop();

    form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const formData = new FormData(form);

        const res = await fetch(`/api/reset-password/${token}`, {
            method: "POST",
            body: formData
        });

        const data = await res.json();

        if (data.success) {
            alert("Password reset successful!");
            window.location.href = "/login";
        } else {
            alert(data.message || "Reset failed");
        }
    });
});
</script>

</body>
</html>
